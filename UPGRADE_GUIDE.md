# 插件版本升级指南

## 当前配置
✅ **最低支持版本**: 2024.3  
✅ **兼容版本**: 2025.1, 2025.2, 2025.3  
✅ **一次编译，多版本支持**

> **注意**: 由于JetBrains插件市场要求，`until-build`设置为`253.*`（2025.3）。当2025.4或2026.1发布时，需要手动更新此值。

## 发布新版本时需要修改的地方

### 1. build.gradle (第7行)
```gradle
version '2024.3.0'  // ← 只需要改这里！
```

**示例**:
- 补丁版本: `'2024.3.0'` → `'2024.3.1'`
- 功能版本: `'2024.3.0'` → `'2025.1.0'`

### 2. 其他配置保持不变
```gradle
// 这些都不用改，保持向前兼容
intellij {
    version.set('2024.3')  // 编译版本保持最低支持版本
}
sinceBuild.set('243')      // 最低支持版本不变
untilBuild.set('')         // 继续支持所有未来版本
```

## 版本号规则

### 推荐的版本号格式
- `YYYY.Q.PATCH` (如: 2024.3.1, 2025.1.0)
- `YYYY`: 年份
- `Q`: 季度 (1,2,3)  
- `PATCH`: 补丁号 (0,1,2...)

### 版本升级示例
```
当前: 2024.3.0
↓
小更新: 2024.3.1, 2024.3.2
↓  
大更新: 2025.1.0
↓
后续: 2025.1.1, 2025.2.0...
```

## 验证兼容性

### 本地测试
```bash
# 验证插件在多个版本的兼容性
./gradlew runPluginVerifier
```

### 测试范围
- ✅ 2024.3 (最低支持版本)
- ✅ LATEST-EAP-SNAPSHOT (包含2025.x开发版)

## 常见问题

### Q: 是否需要为2025.1单独编译？
**A**: 不需要！当前配置已经支持2025.1及所有未来版本。

### Q: 用户升级到2025.1后插件还能用吗？
**A**: 能用！`until-build="*.*"` 确保支持所有未来版本。

### Q: 什么时候需要提升最低支持版本？
**A**: 只有当你需要使用2025.1的新API功能时才需要。

### Q: 什么时候需要更新until-build？
**A**: 当IntelliJ发布2026.1或更高版本时，需要更新：
```gradle
// build.gradle
untilBuild.set('253.*')  →  untilBuild.set('261.*')  // 支持到2026.1

// plugin.xml  
until-build="253.*"  →  until-build="261.*"
```

## 发布检查清单

- [ ] 更新 `build.gradle` 中的 `version`
- [ ] 运行 `./gradlew runPluginVerifier` 验证兼容性
- [ ] 更新 changeNotes.html 描述新功能
- [ ] 构建并测试插件包
- [ ] 上传到JetBrains插件市场

**记住**: 只改版本号，其他配置保持不变！
