# Code Reading Mark Note Pro - 开发规则

## 多语言设计规范

### 国际化覆盖
- **要求**: 所有用户界面文本必须支持英文/中文
- **检查**: 按钮、菜单、对话框、标签、错误消息、工具提示

### 资源管理
- **文件位置**:
  - 英文: `src/main/resources/messages/CodeReadingNoteBundle.properties`
  - 中文: `src/main/resources/messages/CodeReadingNoteBundle_zh.properties`
- **键命名**: 使用点号分隔，如 `action.new.topic`, `dialog.create.topic.title`
- **格式**: `key=English text` 或 `key=中文文本`

### 代码规范
- **禁止硬编码**: 不能直接使用字符串字面量
- **正确方式**: `CodeReadingNoteBundle.message("key.name")`
- **参数支持**: `CodeReadingNoteBundle.message("key.name", param1, param2)`

### 语言切换
- **独立设置**: 插件语言独立于IDE语言
- **智能默认**: 自动检测IDE语言（中文IDE→中文插件）
- **运行时切换**: 无需重启IDE，支持即时切换

## 文档管理规范

### 临时文档管理
- **目录**: `tmpmd/` 文件夹
- **命名规范**:
  - 新功能: `feature_功能名.md`
  - 问题修复: `bugfix_问题描述.md`
  - 优化改进: `optimize_内容.md`
- **生命周期**:
  - 开发阶段: 创建相关文档
  - 验收阶段: 整理汇总，去重
  - 完成阶段: 清理文档

### 文档质量要求
- **中文文档**: 使用规范中文，避免口语化
- **英文文档**: 使用标准英文
- **技术文档**: 包含必要代码示例和配置说明

## 代码质量要求

### 国际化要求
- **覆盖率**: 100%用户界面文本国际化
- **一致性**: 所有语言文件键值对必须对应
- **测试**: 验证中英文切换正常显示

### 兼容性要求
- **向后兼容**: 保持数据格式兼容性
- **API稳定**: 插件内部API保持稳定
- **版本控制**: 遵循语义化版本控制

### 异常处理
- **用户友好**: 所有异常要有国际化错误提示
- **日志记录**: 重要操作要有适当日志
- **资源清理**: 正确清理监听器和资源

## 开发工作流

### 新功能开发
1. 在 `tmpmd/` 创建功能文档 `feature_功能名.md`
2. 记录需求分析、设计思路、实现计划
3. 编码实现过程中更新文档
4. 功能验收通过后整理文档内容
5. 检查是否需要更新 PROJECT_CONTEXT.md
6. 清理 tmpmd/ 文档

### 问题修复
1. 在 `tmpmd/` 创建修复文档 `bugfix_问题描述.md`
2. 记录问题分析、根本原因、修复方案
3. 实现修复并更新文档
4. 测试验证后整理文档内容
5. 检查是否需要更新 PROJECT_CONTEXT.md
6. 清理 tmpmd/ 文档

### 规则更新
- 只有在发现现有规则不适用或需要补充时更新规则
- 更新时要确保向后兼容
- 重要规则变更要有详细说明和生效时间

## 技术规范

### 版本控制
- **格式**: `x.y.z` (主版本.次版本.修订号)
- **主版本**: 破坏性变更
- **次版本**: 新增功能
- **修订号**: bug修复

### 分支管理
- **main/master**: 稳定版本分支
- **develop**: 开发分支
- **feature/**: 功能分支
- **bugfix/**: 修复分支

### 提交规范
- **格式**: `类型: 描述`
- **类型**: feat, fix, docs, style, refactor, test, chore
- **描述**: 简洁明了，说明变更内容

---

*最后更新: 2025-11-24*
*适用范围: 所有AI编程助手和开发者*
