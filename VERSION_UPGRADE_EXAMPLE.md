# 插件版本升级策略示例

## 策略A：保持向前兼容（推荐）

### 当前配置（支持2024.3+）
```gradle
// build.gradle
version '2024.3.0'
intellij {
    version.set('2024.3')  // 编译用最低支持版本
}
patchPluginXml {
    sinceBuild.set('243')    // 最低支持2024.3
    untilBuild.set('')       // 支持所有未来版本
}
```

### 发布新版本时只需要改：
```gradle
version '2024.3.1'  // 或 '2025.1.0' - 只是版本号标识
// 其他保持不变！
```

**优点**：
- 一次编译支持2024.3, 2025.1, 2025.2等所有版本
- 用户基数最大
- 维护成本最低

## 策略B：提升最低支持版本

### 如果要最低支持2025.1：
```gradle
// build.gradle
version '2025.1.0'
intellij {
    version.set('2025.1')  // 编译用2025.1
}
patchPluginXml {
    sinceBuild.set('251')    // 最低支持2025.1
    untilBuild.set('')       // 支持所有未来版本
}
```

```xml
<!-- plugin.xml -->
<idea-version since-build="251" until-build="*.*"/>
```

**适用场景**：
- 需要使用2025.1的新API
- 不再维护旧版本用户

## 版本号对照表

| IntelliJ版本 | 内部构建号 | sinceBuild值 |
|-------------|-----------|-------------|
| 2024.1      | 241       | '241'       |
| 2024.2      | 242       | '242'       |
| 2024.3      | 243       | '243'       |
| 2025.1      | 251       | '251'       |
| 2025.2      | 252       | '252'       |

## 实际升级步骤

### 场景1：发布补丁版本（推荐）
```bash
# 只改版本号
version '2024.3.0' → version '2024.3.1'
# 其他都不变
```

### 场景2：支持新版本但保持兼容
```bash
# 改版本号
version '2024.3.0' → version '2025.1.0'
# 其他保持不变，继续支持2024.3+用户
```

### 场景3：提升最低支持版本
```bash
# 改版本号
version '2024.3.0' → version '2025.1.0'
# 改编译版本
intellij.version.set('2024.3') → intellij.version.set('2025.1')
# 改最低支持
sinceBuild.set('243') → sinceBuild.set('251')
# 改plugin.xml
since-build="243" → since-build="251"
```

## 建议

对于你的插件，我建议使用**策略A**：
- 保持当前配置不变
- 只在发布时更新版本号：`version '2024.3.1'`
- 这样可以支持所有2024.3+用户，包括2025.1, 2025.2等

除非你确实需要使用2025.1的新功能，否则没必要提升最低支持版本。
