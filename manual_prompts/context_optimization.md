# 场景2: 功能验收与上下文优化

**目的**: 当计划功能完成后，分析开发文档，评估是否需要更新项目上下文

## 快速操作指南

### 📝 执行步骤
1. 分析 `tmpmd/` 文件夹中的所有文档
2. 与 `PROJECT_CONTEXT.md` 进行对比分析
3. 根据对比结果决定是否需要更新
4. 如需要更新，按规范修改上下文文档

### 💡 快速检查清单
```markdown
- [ ] tmpmd/ 文件是否已清空？(功能验收完成标志)
- [ ] 有新增核心功能特性吗？
- [ ] 架构设计发生重大变化吗？
- [ ] 引入新的技术栈或开发模式吗？
- [ ] 发现重要的设计原则或最佳实践吗？
```

## 详细分析步骤

### 2.1 tmpmd文档分析

**执行步骤**:
1. 遍历 `tmpmd/` 文件夹中的所有文档
2. 按照文档类型进行分类统计：
   - `feature_*.md`: 新功能实现
   - `bugfix_*.md`: 问题修复
   - `optimize_*.md`: 性能优化

3. 提取关键信息：
   - 新增的功能特性
   - 解决的技术问题
   - 采用的实现方案
   - 发现的设计模式或最佳实践

### 2.2 PROJECT_CONTEXT.md 对比分析

**对比维度**:

#### 功能特性对比
- **检查项目**: `tmpmd/` 中的实现是否已在 PROJECT_CONTEXT.md 中体现
- **新增功能**: 是否需要添加到核心功能列表
- **功能增强**: 是否需要更新现有功能描述

#### 架构设计对比
- **新技术**: 是否引入了新的技术栈或架构模式
- **设计理念**: 是否体现了新的设计原则
- **组件结构**: 是否需要更新系统架构描述

#### 开发规范对比
- **新规范**: 是否发现了需要固化的开发模式
- **最佳实践**: 是否有值得推广的编码规范
- **工具链**: 是否引入了新的开发工具

#### 技术实现对比
- **关键技术**: 是否需要更新技术点说明
- **实现模式**: 是否采用了新的技术方案
- **性能优化**: 是否有值得记录的优化经验

### 2.3 更新决策

**更新触发条件**:

#### 必须更新
- 新增核心功能特性
- 架构设计发生重大变化
- 引入新的技术栈或开发模式
- 发现重要的设计原则或最佳实践

#### 建议更新
- 功能实现细节有重要变化
- 发现新的开发规范
- 技术选型有调整
- 用户体验有显著改进

#### 无需更新
- 纯代码重构，无功能变化
- 小的bug修复，无设计影响
- 内部实现优化，无外部影响

### 2.4 PROJECT_CONTEXT.md 更新执行

**更新步骤**:
1. 确定更新范围和内容
2. 按照现有文档结构进行修改
3. 保持文档的简洁性和一致性
4. 更新版本信息和最后修改时间

**更新原则**:
- **精简为要**: 只保留核心的、稳定的信息
- **突出重点**: 重要的功能和技术点优先
- **保持一致**: 与现有文档风格保持一致
- **面向未来**: 为后续开发提供准确的上下文

**更新后的验证**:
- 文档长度是否适中（建议不超过100行）
- 信息密度是否合适
- 内容是否准确反映当前项目状态
- 是否为AI提供了有效的上下文信息

---

## 使用说明

### 执行时机
- **功能验收完成时**: 当你觉得功能开发完成，可以发布时
- **tmpmd清理后**: 文件夹已被清空，准备新功能开发时

### 分析重点
- **功能完整性**: 是否所有计划功能都已实现
- **文档一致性**: tmpmd内容与PROJECT_CONTEXT.md是否匹配
- **架构稳定性**: 是否引入了需要记录的架构变更

### 决策标准
- **保守原则**: 如无明显必要，不更新PROJECT_CONTEXT.md
- **核心优先**: 只记录对项目理解至关重要的信息
- **长期价值**: 记录对未来开发有指导意义的内容

---

*最后更新: 2025-11-24*
*版本: 3.6.0*
